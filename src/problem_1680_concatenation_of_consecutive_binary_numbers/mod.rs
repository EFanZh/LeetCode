pub mod matrix_multiplication;

pub trait Solution {
    fn concatenated_binary(n: i32) -> i32;
}

#[cfg(test)]
mod tests {
    use super::Solution;

    pub fn run<S: Solution>() {
        // See <https://oeis.org/A047778>
        let test_cases = [
            (1, 1),
            (2, 6),
            (3, 27),
            (4, 220),
            (5, 1_765),
            (6, 14_126),
            (7, 113_015),
            (8, 1_808_248),
            (9, 28_931_977),
            (10, 462_911_642),
            (11, 406_586_234),
            (12, 505_379_714),
            (13, 86_075_381),
            (14, 377_206_103),
            (15, 35_297_621),
            (16, 129_523_881),
            (17, 144_764_181),
            (18, 632_453_782),
            (19, 238_520_903),
            (20, 632_668_867),
            (21, 245_403_625),
            (22, 852_915_973),
            (23, 293_310_970),
            (24, 385_951_001),
            (25, 350_431_973),
            (26, 213_823_085),
            (27, 842_338_705),
            (28, 954_838_406),
            (29, 554_828_811),
            (30, 754_521_863),
            (31, 144_699_479),
            (32, 260_766_625),
            (33, 689_063_921),
            (34, 100_090_670),
            (35, 405_802_873),
            (36, 971_383_733),
            (37, 168_558_515),
            (38, 787_744_928),
            (39, 415_675_081),
            (40, 603_205_042),
            (41, 605_122_463),
            (42, 727_837_408),
            (43, 581_593_833),
            (44, 222_005_097),
            (45, 208_326_155),
            (46, 332_873_875),
            (47, 303_927_900),
            (48, 451_385_515),
            (49, 888_672_813),
            (50, 875_059_690),
            (51, 3_819_819),
            (52, 244_468_468),
            (53, 645_981_900),
            (54, 342_841_367),
            (55, 941_847_396),
            (56, 278_232_980),
            (57, 806_910_658),
            (58, 642_281_813),
            (59, 106_035_804),
            (60, 786_291_474),
            (61, 322_654_047),
            (62, 649_858_930),
            (63, 590_971_296),
        ];

        for (n, expected) in test_cases {
            assert_eq!(S::concatenated_binary(n), expected);
        }
    }
}
