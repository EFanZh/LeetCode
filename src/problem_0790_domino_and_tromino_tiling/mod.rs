pub mod dynamic_programming;
pub mod matrix_multiplication;

pub trait Solution {
    fn num_tilings(n: i32) -> i32;
}

#[cfg(test)]
mod tests {
    use super::Solution;

    pub fn run<S: Solution>() {
        // https://oeis.org/A052980.

        let test_cases = [
            (1, 1),
            (2, 2),
            (3, 5),
            (4, 11),
            (5, 24),
            (6, 53),
            (7, 117),
            (8, 258),
            (9, 569),
            (10, 1_255),
            (11, 2_768),
            (12, 6_105),
            (13, 13_465),
            (14, 29_698),
            (15, 65_501),
            (16, 144_467),
            (17, 318_632),
            (18, 702_765),
            (19, 1_549_997),
            (20, 3_418_626),
            (21, 7_540_017),
            (22, 16_630_031),
            (23, 36_678_688),
            (24, 80_897_393),
            (25, 178_424_817),
            (26, 393_528_322),
            (27, 867_954_037),
            (28, 914_332_884),
            (29, 222_194_076),
            (30, 312_342_182),
            (31, 539_017_241),
            (32, 300_228_551),
            (33, 912_799_284),
            (34, 364_615_795),
            (35, 29_460_134),
            (36, 971_719_552),
            (37, 308_054_885),
            (38, 645_569_904),
            (39, 262_859_346),
            (40, 833_773_577),
            (41, 313_117_044),
            (42, 889_093_434),
            (43, 611_960_431),
            (44, 537_037_899),
            (45, 963_169_225),
            (46, 538_298_867),
            (47, 613_635_626),
            (48, 190_440_463),
            (49, 919_179_793),
            (50, 451_995_198),
            (51, 94_430_852),
            (52, 108_041_490),
            (53, 668_078_178),
            (54, 430_587_201),
            (55, 969_215_892),
            (56, 606_509_948),
            (57, 643_607_090),
            (58, 256_430_058),
            (59, 119_370_057),
            (60, 882_347_204),
            (61, 21_124_452),
            (62, 161_618_961),
            (63, 205_585_119),
            (64, 432_294_690),
            (65, 26_208_334),
            (66, 258_001_787),
            (67, 948_298_264),
            (68, 922_804_855),
            (69, 103_611_483),
            (70, 155_521_223),
            (71, 233_847_294),
            (72, 571_306_071),
            (73, 298_133_358),
            (74, 830_114_010),
            (75, 231_534_077),
            (76, 761_201_512),
            (77, 352_517_020),
            (78, 936_568_117),
            (79, 634_337_732),
            (80, 621_192_477),
            (81, 178_953_057),
            (82, 992_243_846),
            (83, 605_680_155),
            (84, 390_313_360),
            (85, 772_870_559),
            (86, 151_421_259),
            (87, 693_155_878),
            (88, 159_182_301),
            (89, 469_785_861),
            (90, 632_727_593),
            (91, 424_637_480),
            (92, 319_060_814),
            (93, 270_849_214),
            (94, 966_335_908),
            (95, 251_732_616),
        ];

        for (n, expected) in test_cases {
            assert_eq!(S::num_tilings(n), expected);
        }
    }
}
